{"ast":null,"code":"import create from \"zustand\";\nimport { persist } from \"zustand/middleware\";\nconst useUserStore = create(persist(set => ({\n  user: null,\n  token: null,\n  isLoggedIn: false,\n  // Set user details properly\n  setDetails: (user, token) => {\n    console.log(\"Setting user details:\", {\n      user,\n      token\n    });\n    set({\n      user,\n      token,\n      isLoggedIn: true\n    });\n  },\n  // Fetch user details and update Zustand state\n  getUser: async token => {\n    try {\n      const response = await fetch(`${process.env.REACT_APP_BASE_URL}/user-detail`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}` // ✅ Fixed incorrect token format\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch user\");\n      }\n      const data = await response.json();\n      set(state => ({\n        user: data,\n        token: state.token,\n        // Preserve existing token\n        isLoggedIn: true\n      }));\n    } catch (error) {\n      console.error(\"Error fetching user details:\", error);\n    }\n  },\n  // Clear user details\n  clearUser: () => set({\n    user: null,\n    token: null,\n    isLoggedIn: false\n  })\n}), {\n  name: \"user-store\",\n  getStorage: () => localStorage // ✅ Name of localStorage key\n}));\n\nexport default useUserStore;","map":{"version":3,"names":["create","persist","useUserStore","set","user","token","isLoggedIn","setDetails","console","log","getUser","response","fetch","process","env","REACT_APP_BASE_URL","method","headers","Authorization","ok","Error","data","json","state","error","clearUser","name","getStorage","localStorage"],"sources":["/Users/praneetha18/Downloads/games-app-main/src/store/user.js"],"sourcesContent":["import create from \"zustand\";\nimport { persist } from \"zustand/middleware\";\n\nconst useUserStore = create(\n    persist(\n        (set) => ({\n            user: null,\n            token: null,\n            isLoggedIn: false,\n            \n            // Set user details properly\n            setDetails: (user, token) => {console.log(\"Setting user details:\", { user, token });set({ user, token, isLoggedIn: true })},\n\n            // Fetch user details and update Zustand state\n            getUser: async (token) => {\n                try {\n                    const response = await fetch(`${process.env.REACT_APP_BASE_URL}/user-detail`, {\n                        method: \"GET\",\n                        headers: {\n                            \"Content-Type\": \"application/json\",\n                            Authorization: `Bearer ${token}`, // ✅ Fixed incorrect token format\n                        },\n                    });\n\n                    if (!response.ok) {\n                        throw new Error(\"Failed to fetch user\");\n                    }\n\n                    const data = await response.json();\n                    set((state) => ({\n                        user: data,\n                        token: state.token, // Preserve existing token\n                        isLoggedIn: true,\n                    }));\n                } catch (error) {\n                    console.error(\"Error fetching user details:\", error);\n                }\n            },\n\n            // Clear user details\n            clearUser: () => set({ user: null, token: null, isLoggedIn: false }),\n        }),\n        {\n            name: \"user-store\",\n            getStorage: () => localStorage, // ✅ Name of localStorage key\n        }\n    )\n);\n\nexport default useUserStore;\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,SAAS;AAC5B,SAASC,OAAO,QAAQ,oBAAoB;AAE5C,MAAMC,YAAY,GAAGF,MAAM,CACvBC,OAAO,CACFE,GAAG,KAAM;EACNC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,IAAI;EACXC,UAAU,EAAE,KAAK;EAEjB;EACAC,UAAU,EAAE,CAACH,IAAI,EAAEC,KAAK,KAAK;IAACG,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAE;MAAEL,IAAI;MAAEC;IAAM,CAAC,CAAC;IAACF,GAAG,CAAC;MAAEC,IAAI;MAAEC,KAAK;MAAEC,UAAU,EAAE;IAAK,CAAC,CAAC;EAAA,CAAC;EAE3H;EACAI,OAAO,EAAE,MAAOL,KAAK,IAAK;IACtB,IAAI;MACA,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,kBAAmB,cAAa,EAAE;QAC1EC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClCC,aAAa,EAAG,UAASb,KAAM,EAAC,CAAE;QACtC;MACJ,CAAC,CAAC;;MAEF,IAAI,CAACM,QAAQ,CAACQ,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;MAC3C;MAEA,MAAMC,IAAI,GAAG,MAAMV,QAAQ,CAACW,IAAI,EAAE;MAClCnB,GAAG,CAAEoB,KAAK,KAAM;QACZnB,IAAI,EAAEiB,IAAI;QACVhB,KAAK,EAAEkB,KAAK,CAAClB,KAAK;QAAE;QACpBC,UAAU,EAAE;MAChB,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,OAAOkB,KAAK,EAAE;MACZhB,OAAO,CAACgB,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;IACxD;EACJ,CAAC;EAED;EACAC,SAAS,EAAE,MAAMtB,GAAG,CAAC;IAAEC,IAAI,EAAE,IAAI;IAAEC,KAAK,EAAE,IAAI;IAAEC,UAAU,EAAE;EAAM,CAAC;AACvE,CAAC,CAAC,EACF;EACIoB,IAAI,EAAE,YAAY;EAClBC,UAAU,EAAE,MAAMC,YAAY,CAAE;AACpC,CAAC,CACJ,CACJ;;AAED,eAAe1B,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}