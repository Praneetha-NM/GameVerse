{"ast":null,"code":"import create from \"zustand\";\nimport { persist } from \"zustand/middleware\";\nconst useUserStore = create(persist(set => ({\n  user: null,\n  token: null,\n  isLoggedIn: false,\n  // Set user details properly\n  setDetails: _ref => {\n    let {\n      user,\n      token\n    } = _ref;\n    console.log(\"ðŸš€ Zustand setDetails received:\", {\n      user,\n      token\n    });\n    if (!token) {\n      console.error(\"âŒ setDetails received an undefined token!\");\n      return;\n    }\n    set({\n      user,\n      token,\n      isLoggedIn: true\n    });\n  },\n  // Fetch user details and update Zustand state\n  getUser: async token => {\n    try {\n      const response = await fetch(`${process.env.REACT_APP_BASE_URL}/user-detail`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}` // âœ… Fixed incorrect token format\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch user\");\n      }\n      const data = await response.json();\n      set(state => ({\n        user: data,\n        token: state.token,\n        // Preserve existing token\n        isLoggedIn: true\n      }));\n    } catch (error) {\n      console.error(\"Error fetching user details:\", error);\n    }\n  },\n  clearUser: () => {\n    console.log(\"ðŸ”„ Clearing user state\");\n    set({\n      user: null,\n      token: null,\n      isLoggedIn: false\n    });\n  }\n}), {\n  name: \"user-store\",\n  getStorage: () => localStorage // âœ… Name of localStorage key\n}));\n\nexport default useUserStore;","map":{"version":3,"names":["create","persist","useUserStore","set","user","token","isLoggedIn","setDetails","console","log","error","getUser","response","fetch","process","env","REACT_APP_BASE_URL","method","headers","Authorization","ok","Error","data","json","state","clearUser","name","getStorage","localStorage"],"sources":["/Users/praneetha18/Downloads/games-app-main/src/store/user.js"],"sourcesContent":["import create from \"zustand\";\nimport { persist } from \"zustand/middleware\";\n\nconst useUserStore = create(\n    persist(\n        (set) => ({\n            user: null,\n            token: null,\n            isLoggedIn: false,\n            \n            // Set user details properly\n            setDetails: ({ user, token }) => {\n                console.log(\"ðŸš€ Zustand setDetails received:\", { user, token });\n                if (!token) {\n                    console.error(\"âŒ setDetails received an undefined token!\");\n                    return;\n                }\n                set({ user, token, isLoggedIn: true });\n            },\n\n            // Fetch user details and update Zustand state\n            getUser: async (token) => {\n                try {\n                    const response = await fetch(`${process.env.REACT_APP_BASE_URL}/user-detail`, {\n                        method: \"GET\",\n                        headers: {\n                            \"Content-Type\": \"application/json\",\n                            Authorization: `Bearer ${token}`, // âœ… Fixed incorrect token format\n                        },\n                    });\n\n                    if (!response.ok) {\n                        throw new Error(\"Failed to fetch user\");\n                    }\n\n                    const data = await response.json();\n                    set((state) => ({\n                        user: data,\n                        token: state.token, // Preserve existing token\n                        isLoggedIn: true,\n                    }));\n                } catch (error) {\n                    console.error(\"Error fetching user details:\", error);\n                }\n            },\n\n            clearUser: () => {\n                console.log(\"ðŸ”„ Clearing user state\");\n                set({ user: null, token: null, isLoggedIn: false });\n            },\n        \n        }),\n        {\n            name: \"user-store\",\n            getStorage: () => localStorage, // âœ… Name of localStorage key\n        }\n    )\n);\n\nexport default useUserStore;\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,SAAS;AAC5B,SAASC,OAAO,QAAQ,oBAAoB;AAE5C,MAAMC,YAAY,GAAGF,MAAM,CACvBC,OAAO,CACFE,GAAG,KAAM;EACNC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,IAAI;EACXC,UAAU,EAAE,KAAK;EAEjB;EACAC,UAAU,EAAE,QAAqB;IAAA,IAApB;MAAEH,IAAI;MAAEC;IAAM,CAAC;IACxBG,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAE;MAAEL,IAAI;MAAEC;IAAM,CAAC,CAAC;IAC/D,IAAI,CAACA,KAAK,EAAE;MACRG,OAAO,CAACE,KAAK,CAAC,2CAA2C,CAAC;MAC1D;IACJ;IACAP,GAAG,CAAC;MAAEC,IAAI;MAAEC,KAAK;MAAEC,UAAU,EAAE;IAAK,CAAC,CAAC;EAC1C,CAAC;EAED;EACAK,OAAO,EAAE,MAAON,KAAK,IAAK;IACtB,IAAI;MACA,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,kBAAmB,cAAa,EAAE;QAC1EC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClCC,aAAa,EAAG,UAASd,KAAM,EAAC,CAAE;QACtC;MACJ,CAAC,CAAC;;MAEF,IAAI,CAACO,QAAQ,CAACQ,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;MAC3C;MAEA,MAAMC,IAAI,GAAG,MAAMV,QAAQ,CAACW,IAAI,EAAE;MAClCpB,GAAG,CAAEqB,KAAK,KAAM;QACZpB,IAAI,EAAEkB,IAAI;QACVjB,KAAK,EAAEmB,KAAK,CAACnB,KAAK;QAAE;QACpBC,UAAU,EAAE;MAChB,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,OAAOI,KAAK,EAAE;MACZF,OAAO,CAACE,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;IACxD;EACJ,CAAC;EAEDe,SAAS,EAAE,MAAM;IACbjB,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;IACrCN,GAAG,CAAC;MAAEC,IAAI,EAAE,IAAI;MAAEC,KAAK,EAAE,IAAI;MAAEC,UAAU,EAAE;IAAM,CAAC,CAAC;EACvD;AAEJ,CAAC,CAAC,EACF;EACIoB,IAAI,EAAE,YAAY;EAClBC,UAAU,EAAE,MAAMC,YAAY,CAAE;AACpC,CAAC,CACJ,CACJ;;AAED,eAAe1B,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}