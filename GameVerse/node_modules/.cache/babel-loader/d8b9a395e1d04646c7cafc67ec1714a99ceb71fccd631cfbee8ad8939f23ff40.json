{"ast":null,"code":"import create from \"zustand\";\nimport { persist } from \"zustand/middleware\";\nconst useUserStore = create(persist(set => ({\n  user: null,\n  token: null,\n  isLoggedIn: false,\n  // Set user details properly\n  setDetails: (user, token) => set({\n    user,\n    token,\n    isLoggedIn: true\n  }),\n  // Fetch user details and update Zustand state\n  getUser: async token => {\n    try {\n      const response = await fetch(`${process.env.REACT_APP_BASE_URL}/user-detail`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}` // ✅ Fixed incorrect token format\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch user\");\n      }\n      const data = await response.json();\n      set(state => ({\n        user: data,\n        token: state.token,\n        // Preserve existing token\n        isLoggedIn: true\n      }));\n    } catch (error) {\n      console.error(\"Error fetching user details:\", error);\n    }\n  },\n  // Clear user details\n  clearUser: () => set({\n    user: null,\n    token: null,\n    isLoggedIn: false\n  })\n}), {\n  name: \"user-store\",\n  getStorage: () => localStorage // ✅ Name of localStorage key\n}));\n\nexport default useUserStore;","map":{"version":3,"names":["create","persist","useUserStore","set","user","token","isLoggedIn","setDetails","getUser","response","fetch","process","env","REACT_APP_BASE_URL","method","headers","Authorization","ok","Error","data","json","state","error","console","clearUser","name","getStorage","localStorage"],"sources":["/Users/praneetha18/Downloads/games-app-main/src/store/user.js"],"sourcesContent":["import create from \"zustand\";\nimport { persist } from \"zustand/middleware\";\n\nconst useUserStore = create(\n    persist(\n        (set) => ({\n            user: null,\n            token: null,\n            isLoggedIn: false,\n            \n            // Set user details properly\n            setDetails: (user, token) => set({ user, token, isLoggedIn: true }),\n\n            // Fetch user details and update Zustand state\n            getUser: async (token) => {\n                try {\n                    const response = await fetch(`${process.env.REACT_APP_BASE_URL}/user-detail`, {\n                        method: \"GET\",\n                        headers: {\n                            \"Content-Type\": \"application/json\",\n                            Authorization: `Bearer ${token}`, // ✅ Fixed incorrect token format\n                        },\n                    });\n\n                    if (!response.ok) {\n                        throw new Error(\"Failed to fetch user\");\n                    }\n\n                    const data = await response.json();\n                    set((state) => ({\n                        user: data,\n                        token: state.token, // Preserve existing token\n                        isLoggedIn: true,\n                    }));\n                } catch (error) {\n                    console.error(\"Error fetching user details:\", error);\n                }\n            },\n\n            // Clear user details\n            clearUser: () => set({ user: null, token: null, isLoggedIn: false }),\n        }),\n        {\n            name: \"user-store\",\n            getStorage: () => localStorage, // ✅ Name of localStorage key\n        }\n    )\n);\n\nexport default useUserStore;\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,SAAS;AAC5B,SAASC,OAAO,QAAQ,oBAAoB;AAE5C,MAAMC,YAAY,GAAGF,MAAM,CACvBC,OAAO,CACFE,GAAG,KAAM;EACNC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,IAAI;EACXC,UAAU,EAAE,KAAK;EAEjB;EACAC,UAAU,EAAE,CAACH,IAAI,EAAEC,KAAK,KAAKF,GAAG,CAAC;IAAEC,IAAI;IAAEC,KAAK;IAAEC,UAAU,EAAE;EAAK,CAAC,CAAC;EAEnE;EACAE,OAAO,EAAE,MAAOH,KAAK,IAAK;IACtB,IAAI;MACA,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAG,CAACC,kBAAmB,cAAa,EAAE;QAC1EC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClCC,aAAa,EAAG,UAASX,KAAM,EAAC,CAAE;QACtC;MACJ,CAAC,CAAC;;MAEF,IAAI,CAACI,QAAQ,CAACQ,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;MAC3C;MAEA,MAAMC,IAAI,GAAG,MAAMV,QAAQ,CAACW,IAAI,EAAE;MAClCjB,GAAG,CAAEkB,KAAK,KAAM;QACZjB,IAAI,EAAEe,IAAI;QACVd,KAAK,EAAEgB,KAAK,CAAChB,KAAK;QAAE;QACpBC,UAAU,EAAE;MAChB,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,OAAOgB,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;IACxD;EACJ,CAAC;EAED;EACAE,SAAS,EAAE,MAAMrB,GAAG,CAAC;IAAEC,IAAI,EAAE,IAAI;IAAEC,KAAK,EAAE,IAAI;IAAEC,UAAU,EAAE;EAAM,CAAC;AACvE,CAAC,CAAC,EACF;EACImB,IAAI,EAAE,YAAY;EAClBC,UAAU,EAAE,MAAMC,YAAY,CAAE;AACpC,CAAC,CACJ,CACJ;;AAED,eAAezB,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}